(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a156754c"],{7626:function(t,a,o){},b0c0:function(t,a,o){var i=o("83ab"),s=o("9bf2").f,e=Function.prototype,r=e.toString,n=/^\s*function ([^ (]*)/,c="name";!i||c in e||s(e,c,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})},c26d:function(t,a,o){"use strict";var i=o("7626"),s=o.n(i);s.a},dc93:function(t,a,o){"use strict";o.r(a);var i=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"contentPage"},[o("div",{ref:"header",staticClass:"header"},[o("div",{staticClass:"left-arrow",on:{click:t.backNext}}),o("div",{staticClass:"header-title"},[o("span",[t._v(t._s(t.title))]),t._v(" "),o("span",[t._v(t._s(t.current+1))]),t._v("/"+t._s(t.bookData.length))]),o("div",{staticClass:"header-more"})]),t.readPattern?o("div",{ref:"contentBox",staticClass:"content-box",on:{click:t.tpAnimate,scroll:function(a){return t.contentScroll()}}},[t._l(t.bookData,(function(t,a){return o("img",{key:a,staticClass:"auto-img",attrs:{src:t.img,alt:""}})})),o("span",{on:{click:t.nextChapter}},[t._v("点击下一章")])],2):t._e(),t.readPattern?t._e():o("div",{ref:"contentBox",staticClass:"content-box",on:{click:t.tpAnimate,scroll:function(a){return t.contentScroll()}}},[o("van-swipe",{attrs:{width:"100%",duration:"200"},on:{change:t.onChange}},[t._l(t.bookData,(function(a,i){return o("van-swipe-item",{key:i,staticClass:"swipe-box next-chapter",attrs:{slot:"default"},slot:"default"},[i!=t.bookData.length-1?o("img",{staticClass:"auto-img",attrs:{src:a.img,alt:""}}):t._e(),i==t.bookData.length-1?o("div",[o("div",{staticClass:"mantou-pic"}),o("p",[t._v("神秘新世界的大门在召唤你！")]),o("div",[t._v(" 您已阅读完毕 "),o("strong",[t._v(t._s(t.title))]),t._v(" ,您还可以 ")]),o("div",{staticClass:"caozuo-ku"},[o("div",{staticClass:"shangyihua",on:{click:t.prevChapter}},[o("i"),o("span",[t._v("上一话")])]),o("div",{staticClass:"huizhuye",on:{click:t.backNext}},[o("i"),o("span",[t._v("详情页")])]),o("div",{staticClass:"xiayihua",on:{click:t.nextChapter}},[o("i"),o("span",[t._v("下一话")])])])]):t._e()])})),o("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v(t._s(t.current+1)+"/"+t._s(t.bookData.length))])],2)],1),o("div",{ref:"footer",staticClass:"footer"},[o("div",{staticClass:"pattern"},[o("i",{directives:[{name:"show",rawName:"v-show",value:t.patternSwitch,expression:"patternSwitch"}],staticClass:"tp-bt",on:{click:t.switchPattern}}),o("i",{directives:[{name:"show",rawName:"v-show",value:!t.patternSwitch,expression:"!patternSwitch"}],staticClass:"lt-rt",on:{click:t.switchPattern}})]),o("div",{staticClass:"collection",on:{click:t.addBookShelf}}),o("div",{staticClass:"back-home",on:{click:function(a){return t.goState({name:"home"})}}}),o("div",{staticClass:"prevChapter",on:{click:t.prevChapter}}),o("div",{staticClass:"nextChapter",on:{click:t.nextChapter}})]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.tipShow,expression:"tipShow"}],staticClass:"tip-box",on:{click:function(a){t.tipShow=!1}}},[o("i",{directives:[{name:"show",rawName:"v-show",value:t.tipIcon,expression:"tipIcon"}],staticClass:"shang"}),o("i",{directives:[{name:"show",rawName:"v-show",value:!t.tipIcon,expression:"!tipIcon"}],staticClass:"zuo"})])])},s=[],e=(o("b0c0"),o("d3b7"),{data:function(){return{patternSwitch:!0,tipShow:!1,tipIcon:!0,tpBtShow:!0,bookData:"",watchNum:0,bookList:"",timers:[],current:0,readPattern:!0,title:""}},created:function(){var t=this,a=this,o=JSON.parse(localStorage.getItem("opctionFangshi"));o&&(this.patternSwitch=this.tipIcon=this.readPattern=o.mode),this.bookList=this.$route.params.list,this.watchNum=this.$route.params.num;var i="http://api.pingcc.cn/?mhurl2="+this.bookList[this.watchNum].url;this.ajax(i).then((function(o){a.bookData=JSON.parse(o).list,a.readPattern||a.bookData.push([]),t.title=t.bookList[t.watchNum].num}))},methods:{onChange:function(t){this.current=t;var a=this,o=setTimeout((function(){for(var t=1;t<a.timers.length;t++)clearTimeout(a.timers[t]);a.timers=[]}),350);this.timers.push(o),this.tpBtShow=!0,this.tpAnimate()},switchPattern:function(){this.patternSwitch=!this.patternSwitch,localStorage.setItem("opctionFangshi",JSON.stringify({mode:this.patternSwitch})),this.tipShow=!this.tipShow,this.tipIcon=this.patternSwitch,this.readPattern=!this.readPattern,this.current=0},backNext:function(){window.history.back(-1)},tpAnimate:function(){var t=this.$refs.header,a=this.$refs.footer;this.tpBtShow?(t.classList.remove("tpback-ani"),a.classList.remove("btback-ani"),t.classList.add("tp-ani"),a.classList.add("bt-ani"),this.tpBtShow=!1):(t.classList.remove("tp-ani"),a.classList.remove("bt-ani"),t.classList.add("tpback-ani"),a.classList.add("btback-ani"),this.tpBtShow=!0)},nextChapter:function(){var t=this;if(this.watchNum!=this.bookList.length){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var a=this.$refs.contentBox;a.html="",t.watchNum++,this.title=this.bookList[this.watchNum].num,this.readPattern?a.scrollTop=0:this.current=0;var o="http://api.pingcc.cn/?mhurl2="+this.bookList[this.watchNum].url;this.ajax(o).then((function(a){t.bookData=JSON.parse(a).list,t.readPattern||t.bookData.push([]),t.$toast.clear()}))}else this.$toast("大人，已经是最后一章了")},prevChapter:function(){var t=this;if(1!=this.watchNum){t.watchNum--,this.title=this.bookList[this.watchNum].num,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var a=this.$refs.contentBox;a.html="",this.readPattern?a.scrollTop=0:this.current=0;var o="http://api.pingcc.cn/?mhurl2="+this.bookList[this.watchNum].url;this.ajax(o).then((function(a){t.bookData=JSON.parse(a).list,t.readPattern||t.bookData.push([]),t.$toast.clear()}))}else this.$toast("大人，已经是第一章了")},goState:function(t){this.$router.push(t)},contentScroll:function(){var t=this,a=setTimeout((function(){for(var a=1;a<t.timers.length;a++)clearTimeout(t.timers[a]);t.timers=[]}),350);this.timers.push(a),this.tpBtShow=!0,this.tpAnimate()},addBookShelf:function(){var t=JSON.parse(localStorage.getItem("watchHis")),a=this.$route.params.book;if(!t){var o=[{bookname:a.name,bookAuthor:a.author,bookCover:a.cover,bookNum:this.watchNum,bookShelf:!0,bookZiliao:this.$route.params.bookUrl}];return localStorage.setItem("watchHis",JSON.stringify(o)),void this.$toast("订阅成功")}for(var i=0;i<t.length;i++)if(a.name==t[i].bookname||a.author==t[i].bookAuthor||a.cover==t[i].bookCover)return void(t[i].bookShelf?this.$toast("本书已存在书架"):(t[i].bookShelf=!0,localStorage.setItem("watchHis",JSON.stringify(t)),this.$toast("订阅成功")));t.unshift({bookname:a.name,bookAuthor:a.author,bookCover:a.cover,bookNum:this.watchNum,bookShelf:!0,bookZiliao:this.$route.params.bookUrl}),localStorage.setItem("watchHis",JSON.stringify(t)),this.$toast("订阅成功")},ajax:function(t){return new Promise((function(a,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&200===this.status&&a(this.responseText)},i.open("Get",t,!1),i.send(null)}))}},beforeRouteLeave:function(t,a,o){var i=JSON.parse(localStorage.getItem("watchHis"));this.$toast.clear();var s=this.$route.params.book;if(!i){var e=[{bookname:s.name,bookAuthor:s.author,bookCover:s.cover,bookNum:this.watchNum,bookShelf:!1,bookZiliao:this.$route.params.bookUrl}];return localStorage.setItem("watchHis",JSON.stringify(e)),void o()}for(var r=0;r<i.length;r++)if(s.name==i[r].bookname||s.author==i[r].bookAuthor||s.cover==i[r].bookCover)return i[r].bookNum=this.watchNum,localStorage.setItem("watchHis",JSON.stringify(i)),void o();i.unshift({bookname:s.name,bookAuthor:s.author,bookCover:s.cover,bookNum:this.watchNum,bookShelf:!1,bookZiliao:this.$route.params.bookUrl}),localStorage.setItem("watchHis",JSON.stringify(i)),o()}}),r=e,n=(o("c26d"),o("2877")),c=Object(n["a"])(r,i,s,!1,null,"16fa6375",null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-a156754c.f4eb6736.js.map